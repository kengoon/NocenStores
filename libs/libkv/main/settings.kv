<Setting>
    name: "setting"
    update: False
    on_enter:
        self.add_all_rules(rule1, rule2) if not self.update else None
        self.update = True

    BoxLayout:
        orientation:"vertical"
        LeftIconToolBar:
            icon: "arrow-left"
            title: "Settings"
            callback: root.go_home

        ScrollView:
            effect_cls: ScrollEffect
            MDList:
                spacing: dp(25)
                padding: dp(10)
                MD3Card:
                    id: rule1
                    orientation:"vertical"
                    radius: [dp(10)] * 4
                    root: root
                    items:
                        {\
                        "My Details": "account-details",\
                        "Change Phone Number": "cellphone-cog",\
                        "Change Password": "account-edit"\
                        }
                    content: [Factory.DetailContent(), Factory.NumberContent(), Factory.PasswordContent()]
                    size_hint_y: None
                    height: self.minimum_height

                MD3Card:
                    id: rule2
                    orientation:"vertical"
                    radius: [dp(10)] * 4
                    root: root
                    items:
                        {\
                        "Dark Mode": "moon-waxing-crescent",\
                        "Rate Us": "star",\
                        }
                    content: [Factory.DarkModeContent(), Factory.RateContent()]
                    size_hint_y: None
                    height: self.minimum_height

<RateContent@MDBoxLayout>
    adaptive_height: True
    padding: dp(20)
    MDLabel:
        text: "How good is NocenStore??"
        font_style: "Money"

    AKRating:
        id: rates
        normal_icon: 'star-outline'
        active_icon: 'star'
        animation_type: 'grow'
        normal_color: app.theme_cls.disabled_hint_text_color
        active_color: app.theme_cls.primary_color
        on_rate: webbrowser.open("https://play.google.com/store/apps/details?id=org.mindset.nocenstore.nocenstore")

<DarkModeContent@MDBoxLayout>
    adaptive_height: True
    padding: dp(20)
    MDLabel:
        text: "Turn Dark Mode On/Off"

    MDSwitch:
        pos_hint: {"center_x": .7, "center_y": .4}
        active: True if app.theme_cls.theme_style == "Dark" else False
        disabled: True
        on_active:
            root.parent.parent.root.check_theme_active()


<DetailContent@MDBoxLayout>:
    size_hint_y: None
    height: dp(170)
    padding: dp(20)
    spacing: dp(20)
    orientation:"vertical"
    name: app.firebase["name"] if app.firebase else ""
    email: app.firebase["email"] if app.firebase else ""
    phone: app.firebase["phone"] if app.firebase else ""
    MDLabel:
        id: name
        text: f"Name: {root.name}"
        size_hint_y: None
        height: self.texture_size[1]

    MDLabel:
        id: email
        text: f"Email: {root.email}"
        size_hint_y: None
        height: self.texture_size[1]

    MDLabel:
        id: phone
        text: f"Phone no: {root.phone}"
        size_hint_y: None
        height: self.texture_size[1]

<PasswordContent@MDBoxLayout>
    adaptive_height: True
    orientation: "vertical"
    padding: dp(20)
    spacing: dp(20)
    MDFillRoundFlatIconButton:
        icon: "email"
        text: "Request Password Reset"
        pos_hint:{"center_x": .5}
        on_release:
            root.parent.parent.root.reset_password()

<NumberContent@MDBoxLayout>
    padding: dp(20)
    spacing: dp(20)
    adaptive_height: True
    PhoneTextField:
        id: number
        hint_text: "change phone number :"
        input_filter: "int"
        on_focus: self.do_focus(args[1])
        on_text_validate:
            root.parent.parent.root.change_number(self.text)
    MD3Card:
        size_hint: None, None
        size: self.minimum_width, self.minimum_height
        radius: [dp(5)] * 4
        on_release:
            root.parent.parent.root.change_number(number.text)
        MDIconButton:
            icon: "check"
            theme_text_color: "Custom"
            text_color: app.theme_cls.primary_color

<Loader@MDBoxLayout>:
    spacing: dp(15)
    adaptive_height: True
    padding: [0, 0, 0, dp(10)]
    MDSpinner:
        size_hint: None, None
        size: "40dp", "40dp"
        active: True
    MDLabel:
        text: "please wait...."
        text_size: self.size
        valign: "center"
