<ProductLookOut>
    name: "lookout"
    on_leave:
        buttons.opacity = .5 if app.login and not app.current else 1
        buttons.disabled = True if app.login and not app.current else False
        save.icon = "heart-outline"
    BoxLayout:
        orientation: "vertical"
        MDCard:
            size_hint_y: None
            height: self.minimum_height
            orientation: "vertical"
            padding: [dp(10), 0, dp(10), 0]
            md_bg_color: [1,1,1,1] if app.theme_cls.theme_style == "Light" else get_color_from_hex("1f1f1f")

            MDBoxLayout:
                size_hint: 1, None
                height: app.theme_cls.standard_increment
                spacing: dp(10)
                MDIconButton:
                    icon: "arrow-left"
                    pos_hint: {"center_y": .5}
                    on_release: root.go_back()

                MDLabel:
                    text: f"Details[color={get_hex_from_color(app.theme_cls.primary_color)}]â€¢[/color]"
                    color: [1,1,1,1] if app.theme_cls.theme_style == "Dark" else [0,0,0,.7]
                    markup: True
                    font_style:"BigMoney"
                    bold: True
                    pos_hint:{"center_y": .5}

                MDIconButton:
                    icon: "cart-variant"
                    on_release:
                        app.current = root.name
                        root.manager.current = "cart"

        ScrollView:
            effect_cls: ScrollEffect
            MDList:
                padding: 0
                MDBoxLayout:
                    size_hint_y: None
                    height: self.minimum_height
                    MDRelativeLayout:
                        size_hint_y: None
                        height: Window.height/3 + dp(100)
                        md_bg_color: [1,1,1,1] if app.theme_cls.theme_style == "Light" else get_color_from_hex("1f1f1f")
                        ScreenManager:
                            id: mg
                            Screen:
                                name: "1"
                                AsyncImage:
                                    id: image1
                                    source: ""
                                    nocache: True
                            Screen:
                                name: "2"
                                AsyncImage:
                                    id: image2
                                    source: ""
                                    nocache: True
                            Screen:
                                name: "3"
                                AsyncImage:
                                    id: image3
                                    source: ""
                                    nocache: True

                        MDBoxLayout:
                            spacing: dp(40)
                            adaptive_size: True
                            pos_hint: {"center_x":.5, "center_y": .1}
                            MDIcon:
                                id: ico1
                                icon: "circle"
                                color: app.theme_cls.primary_color
                            MDIcon:
                                id: ico2
                                icon: "circle-outline"
                                color: app.theme_cls.primary_color
                            MDIcon:
                                id: ico3
                                icon: "circle-outline"
                                color: app.theme_cls.primary_color

                        MDIconButton:
                            icon: "chevron-left"
                            theme_text_color: "Custom"
                            user_font_size: dp(30)
                            text_color: app.theme_cls.primary_color
                            pos_hint: {"center_y": .5}
                            on_release:
                                mg.transition.direction = "right"
                                mg.current = str(int(mg.current) - 1) if int(mg.current) > 1 else "1"
                                root.change_circle()

                        MDIconButton:
                            icon: "chevron-right"
                            theme_text_color: "Custom"
                            user_font_size: dp(30)
                            text_color: app.theme_cls.primary_color
                            pos_hint: {"center_y": .5, "right": 1}
                            on_release:
                                mg.transition.direction = "left"
                                mg.current = str(int(mg.current) + 1) if int(mg.current) < 3 else "3"
                                root.change_circle()
                MDBoxLayout:
                    adaptive_height: True
                    orientation: "vertical"
                    padding: [0, dp(20), 0, 0]
                    MDList:
                        spacing: dp(20)
                        padding: dp(10)
                        M_AKLabelLoader:
                            id: product_name
                            text: ""
                            font_style: "Money"
                            radius: [dp(5)]
                            font_size: dp(30)
                            halign: "center"
                            size_hint_y: None
                            height: dp(30) if not self.text else self.texture_size[1]
                        MDCard:
                            size_hint_y: None
                            height: self.minimum_height
                            radius: [dp(5)]
                            orientation: "vertical"
                            spacing: dp(20)
                            MDCard:
                                padding: dp(10)
                                size_hint_y: None
                                height: self.minimum_height
                                radius: [dp(5)]
                                elevation: 0
                                MDLabel:
                                    text: "Price:"
                                    size_hint_y: None
                                    height: self.texture_size[1]
                                    font_style: "Money"
                                    underline: True
                                M_AKLabelLoader:
                                    id: product_price
                                    text: ""
                                    size_hint_y: None
                                    height: dp(30) if not self.text else self.texture_size[1]
                                    halign:"center"
                                    bold: True
                                    radius: [dp(5)]
                            MDCard:
                                padding: dp(10)
                                size_hint_y: None
                                height: self.minimum_height
                                radius: [dp(5)]
                                elevation: 0
                                MDLabel:
                                    text: "store:"
                                    size_hint_y: None
                                    height: self.texture_size[1]
                                    font_style: "Money"
                                    underline: True
                                M_AKLabelLoader:
                                    id: store
                                    text: ""
                                    bold: True
                                    size_hint_y: None
                                    height: dp(30) if not self.text else self.texture_size[1]
                                    halign:"center"
                                    radius: [dp(5)]

                            MDCard:
                                padding: dp(10)
                                size_hint_y: None
                                height: self.minimum_height
                                radius: [dp(5)]
                                elevation: 0
                                MDLabel:
                                    text: "Rating:"
                                    size_hint_y: None
                                    height: self.texture_size[1]
                                    font_style: "Money"
                                    underline: True
                                AKRating:
                                    id: rates
                                    normal_icon: 'star-box-outline'
                                    active_icon: 'star-box'
                                    animation_type: 'grow'
                                    normal_color: app.theme_cls.disabled_hint_text_color
                                    active_color: app.theme_cls.primary_color
                                    icon_size: dp(20)
                                    disabled: True
                                    pos_hint: {"center_x": .5, "center_y": .5}
                        MDCard:
                            size_hint_y: None
                            height: self.minimum_height
                            orientation: "vertical"
                            padding: dp(10)
                            spacing: dp(10)
                            radius: [dp(5)]
                            MDLabel:
                                text: "Description:"
                                size_hint_y: None
                                height: self.texture_size[1]
                                underline: True
                                bold: True
                                italic: True
                                font_style: "Money"

                            M_AKLabelLoader:
                                id: description
                                text: ""
                                size_hint_y: None
                                height: dp(30) if not self.text else self.texture_size[1]
                                radius: [dp(5)]
                                pos_hint: {"center_x": .5}
                                font_style: "Money"

                        MDCard:
                            size_hint_y: None
                            orientation:"vertical"
                            height: dp(100)
                            padding: dp(10)
                            spacing: dp(10)
                            radius: [dp(5)]
                            MDLabel:
                                text: "size:"
                                size_hint_y: None
                                height: self.texture_size[1]
                                underline: True
                                bold: True
                                italic: True
                                font_style: "Money"
                            RecycleView:
                                id: rvs
                                effect_cls: _ScrollViewHardStop
                                do_scroll_y: False
                                viewclass: "PlanItem"
                                RecycleBoxLayout:
                                    id: holder
                                    root: root
                                    default_size_hint: None, None
                                    default_size: dp(40), dp(40)
                                    size_hint: None, None
                                    size: self.minimum_width ,self.minimum_height
                                    spacing:dp(5)
                                    orientation: "horizontal"

                        MDCard:
                            radius: [dp(10)]
                            orientation: "vertical"
                            size_hint_y: None
                            height: self.minimum_height
                            MDList:
                                ThreeLineIconListItem:
                                    text: "Product Delivery"
                                    secondary_text: "Ready for delivery between 2 to 3 days "
                                    tertiary_text: "from the day you ordered"
                                    IconLeftWidget:
                                        id: li_icon_3
                                        icon: "truck-delivery-outline"
                                ThreeLineIconListItem:
                                    text: "Return Policy"
                                    secondary_text: "Free return within a day and"
                                    tertiary_text: "Full Refund if you do not get your package delivered"
                                    divider: None
                                    IconLeftWidget:
                                        id: li_icon_3
                                        icon: "police-badge-outline"


                        MDCard:
                            size_hint_y: None
                            height: self.minimum_height
                            orientation: "vertical"
                            size_hint_x: .5
                            padding: dp(10)
                            spacing: dp(10)
                            radius: [dp(5)]
                            ripple_behavior: True
                            md_bg_color: app.theme_cls.primary_color
                            MDLabel:
                                text: "View Comment"
                                size_hint_y: None
                                height: self.texture_size[1]
                                underline: True
                                bold: True
                                color: 1,1,1,1
                                italic: True
                                font_style: "Money"
                                halign: "center"

#                        MDCard:
#                            orientation:"vertical"
#                            size_hint_y: None
#                            radius: [dp(8)]
#                            height: Window.height/2.7
#                            padding: dp(10)
#                            spacing: dp(10)
#                            MDLabel:
#                                text: "Other similar product"
#                                font_style: "H6"
#                                size_hint_y: None
#                                height: self.texture_size[1]
#
#                            RecycleView:
#                                effect_cls: _ScrollViewHardStop
#                                do_scroll_y: False
#                                viewclass: "OtherSalesCard"
#                                RecycleBoxLayout:
#                                    default_size_hint: None, None
#                                    default_size: root.width/2.5 - dp(10), Window.height/3.7
#                                    size_hint: None, None
#                                    size: self.minimum_width ,self.minimum_height
#                                    spacing:dp(10)
#                                    orientation: "horizontal"
#                                    padding: dp(5)



        MDBoxLayout:
            id: buttons
            disabled: True if app.login else False
            opacity: .5 if app.login else 1
            adaptive_height: True
            padding: dp(10), dp(5), dp(10), dp(10)
            spacing: dp(20)
            CardIconButton:
                md_bg_color: app.theme_cls.primary_color
                label_halign: "center"
                icon: "cart-variant"
                text: "ADD TO CART"
                font_style: "Money"
                icon_color: 1,1,1,1
                text_color: 1,1,1,1
                icon_width: root.width/2.5
                on_release:
                    root.add_to_cart()
            MDCard:
                size_hint: None, None
                size: self.minimum_width, self.minimum_height
                radius: [dp(5)]
                MDIconButton:
                    id: save
                    icon: "heart-outline"
                    theme_text_color: "Custom"
                    text_color: app.theme_cls.primary_color
                    on_release: root.save_unsave(self)
