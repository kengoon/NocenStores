<Home>:
    name: "home"
    outliner: [home, profile, sell, used, feeds]
    BoxLayout:
        orientation: "vertical"
        ScreenManager:
            id: manager
            transition: NoTransition()
            Screen:
                id: home
                name: "home"
                root: root
                MDBoxLayout:
                    orientation:"vertical"
                    MDBoxLayout:
                        adaptive_height: True
                        padding: dp(10)
                        orientation: "vertical"
                        TopLayerHome:
                            callback: root.go_cart
                            root: root
                        M_CardTextField:
                            radius: dp(10)
                            hint_text: "search"
                            icon_left: "magnify"
                            # icon_left_callback: lambda x: rv.refresh_from_data()
                            md_bg_color: 1, 1, 1, 1
                            background_color: 1, 1, 1, 1
                            icon_left_color: 1, 1, 1, 1
                            elevation: 0
                            text_field_disabled: True
                            card_padding: [dp(10), 0]
                            foreground_color: [0, 0, 0, 0.8] if app.theme_cls.theme_style == "Light" else [1,1,1,1]
                            cursor_color: [0, 0, 0, .7] if app.theme_cls.theme_style == "Light" else [1,1,1,1]
                            disabled_foreground_color: [0.5, 0.5, 0.5, 1.0]
                            on_release:
                                root.manager.prev_screen.append(root.name)
                                check_add_widget(app, "search_widget", root, Factory.Search(), "search")
                                root.manager.ids.search.p_type = True
                                root.manager.current = "search"
                            AsyncImage:
                                size_hint_x: .2
                                source: "assets/image/search.gif"
                                anim_delay: .05

                    RecycleView:
                        id: rv
                        key_viewclass: "viewclass"
                        do_scroll_x: False
                        effect_cls: ScrollEffect
    #                    on_scroll_start: root.schedule_load()
                        RecycleBoxLayout:
                            id: holder
                            root: root.manager
                            roots: root
                            default_size_hint: 1, None
                            default_size: 0, Window.height/4.5
                            size_hint_y: None
                            height: self.minimum_height
                            spacing:dp(20)
                            padding: [0, 0, 0, dp(100)]
                            orientation: "vertical"
                            key_size: "_size"

    BottomNavigation:
        id: nav
        bg_color: 1, 1, 1, 1
        elevation: 8
        NavButton:
            id: home
            text: "home"
            icon: "home"
            root: root
            widget: False
            on_release: manager.current = "home"
        NavButton:
            id: feeds
            text: "Feeds"
            icon: "newspaper-variant"
            root: root
            widget: False
            on_release:
                widget = Factory.Feeds(root=root)
                if not self.widget: manager.add_widget(widget); root.ids["feeds"] = widget; self.widget = True
                manager.current = "feeds"
        NavButton:
            id: sell
            text: "sell"
            icon: "plus-circle"
            root: root
            widget: False
            on_release:
                widget = Factory.Sell(root=root)
                if not self.widget: manager.add_widget(widget); root.ids["sell"]; self.widget = True
                manager.current = "sell"

        NavButton:
            id: used
            text: "Fairly-Used"
            icon: "shield-off"
            root: root
            widget: False
            on_release:
                widget = Factory.Used(root=root)
                if not self.widget: manager.add_widget(widget); root.ids["used"] = widget; self.widget = True
                manager.current = "used"

        NavButton:
            id: profile
            text: "Profile"
            icon: "account"
            root: root
            widget: False
            on_release:
                widget = Factory.Profile(root=root)
                if not self.widget: manager.add_widget(widget); root.ids["profiles"] = widget; self.widget = True
                manager.current = "profile"