<Home>:
    name: "home"
    outliner: [home, profile, sell, used, feeds]

#    MDNavigationLayout:
#        ScreenManager:
#            Screen:
    MDBottomNavigation:
        id: raw
        text_color_normal: [0,0,0,1] if app.theme_cls.theme_style == "Light" else [1,1,1,1]
        panel_color: [1,1,1,1] if app.theme_cls.theme_style == "Light" else self.panel_color
        MDBottomNavigationItem:
            id: home
            icon: "home"
            text: "Home"
            name: "home"
            root: root
            on_tab_release:
                a = root.outliner.copy()
                a.remove(self)
                root.outline(a, self)

            MDBoxLayout:
                orientation:"vertical"
                md_bg_color: get_color_from_hex("#EEEEEE") if app.theme_cls.theme_style == "Light" else get_color_from_hex("1f1f1f")
                MDBoxLayout:
                    adaptive_height: True
                    padding: dp(10)
                    md_bg_color: app.theme_cls.primary_color
#                    MDIconButton:
#                        id: menu
#                        icon: "menu"
#                        theme_text_color: "Custom"
#                        text_color: 1,1,1,1
#                        on_release:
#                            nav_drawer.set_state("open")
                            #root.menu.open()
                    M_CardTextField:
                        elevation: 10
                        hint_text: "search/voice search"
                        icon_left: "microphone"
                        icon_right: "cart-variant"
                        text_field_disabled: True
                        icon_right_color: app.theme_cls.primary_color
                        icon_left_color: app.theme_cls.primary_color
                        foreground_color: [0, 0, 0, 0.8] if app.theme_cls.theme_style == "Light" else [1,1,1,1]
                        cursor_color: [0, 0, 0, .7] if app.theme_cls.theme_style == "Light" else [1,1,1,1]
                        md_bg_color: [1,1,1,1] if app.theme_cls.theme_style == "Light" else get_color_from_hex("1f1f1f")
                        background_color: [1,1,1,1] if app.theme_cls.theme_style == "Light" else get_color_from_hex("1f1f1f")
                        disabled_foreground_color: [0.5, 0.5, 0.5, 1.0]

                ScrollView:
                    effect_cls: ScrollEffect
                    MDList:
                        padding: 0
                        spacing: 0
                        MDBoxLayout:
                            id: box
                            adaptive_height: True
                            padding: [0, 0, 0, dp(10)]
                            canvas.before:
                                Color:
                                    rgba: app.theme_cls.primary_color
                                Rectangle:
                                    size:self.size[0], (root.height/3)/1.5
                                    pos: self.pos[0], self.pos[1] + dp(100)
                            MDSwiper:
                                id: swiper
                                size_hint_y: None
                                height: Window.height/4.5
                                items_spacing: "10dp"
                                MDSwiperItem:
                                    M_CardLoader:
                                        source:"assets/ads/8.jpg"
                                        text: "Yummy: so tasty"

                                MDSwiperItem:
                                    M_CardLoader
                                        source: "assets/ads/16.jpg"
                                        text: "Angle360: so delicious"

                                MDSwiperItem:
                                    M_CardLoader
                                        source: "assets/ads/18.jpg"
                                        text: "ShopRite: buy one, get one free"
                        MDBoxLayout:
                            adaptive_height: True
                            padding: dp(5)
                            MDCard:
                                size_hint_y: None
                                height: self.minimum_height
                                radius: [dp(10)]
                                MDGridLayout:
                                    adaptive_height: True
                                    cols: 4
                                    padding: dp(10)
                                    spacing: dp(10)
                                    PlatformCan:
                                        root: root
                                        icon: "home-city"
                                        text: "Accommodation"
                                        bg_color: .8, 0, 0, 1

                                    PlatformCan:
                                        root: root
                                        icon: "tools"
                                        bg_color: app.theme_cls.primary_color
                                        text: "Service Provider"

                                    PlatformCan:
                                        root: root
                                        icon: "tshirt-crew"
                                        text: "Fashion"
                                        bg_color: 1, .7, 0, 1

                                    PlatformCan:
                                        root: root
                                        icon: "school"
                                        text: "Student Zone"
                                        bg_color: 1, 0, .8, 1

                        MDGridLayout:
                            adaptive_height: True
                            cols: 3
                            padding: [dp(5), dp(10), dp(5), dp(5)]
                            spacing: dp(5)
                            CategoryCard:
                                text: "Electronics"
                                #text_color: 1, 1, 1, 1
                                source: "assets/0.jpg"
                                on_release:
                                    root.change_screen(self, "category")

                            CategoryCard:
                                text: "Portable Devices"
                                source: "assets/1.jpg"
                                on_release:
                                    root.change_screen(self, "category")
                                #text_color: 1, 1, 1, 1

                            CategoryCard:
                                text: "Clothing"
                                source: "assets/2.jpg"
                                #text_color: 1, 1, 1, 1
                                on_release:
                                    root.change_screen(self, "category")

                            CategoryCard:
                                text: "Furniture"
                                source: "assets/7.jpg"
                                #text_color: 1, 1, 1, 1
                                on_release:
                                    root.change_screen(self, "category")

                            CategoryCard:
                                text: "Kitchen"
                                source: "assets/16.jpg"
                                #text_color: 1, 1, 1, 1
                                on_release:
                                    root.change_screen(self, "category")

                            CategoryCard:
                                text: "Beauty"
                                source: "assets/3.jpg"
                                on_release:
                                    root.change_screen(self, "category")

                        RecycleView:
                            id: rc
                            effect_cls: ScrollEffect
                            viewclass: "FeedsCard"
                            size_hint_y: None
                            height: root.height
                            RecycleGridLayout:
                                default_size_hint: 1, None
                                default_size: None, Window.height/3.5
                                size_hint_y: None
                                height: self.minimum_height
                                spacing:dp(10)
                                cols: 1
                                padding: dp(5)

        MDBottomNavigationItem:
            id: feeds
            name: "feeds"
            text: "Feeds"
            icon: "newspaper-variant-outline"
            root: root
            on_enter:
                self.children[0].dispatch("on_enter")
            on_tab_release:
                a = root.outliner.copy()
                a.remove(self)
                root.outline(a, self)
            Feeds:
                root: root

        MDBottomNavigationItem:
            id: sell
            name: "sell"
            text: "sell"
            icon: "plus-circle-outline"
            on_tab_release:
                a = root.outliner.copy()
                a.remove(self)
                root.outline(a, self)
            Sell:
                root: root
        MDBottomNavigationItem:
            id: used
            name: "used"
            text: "Fairly-Used"
            icon: "shield-off-outline"
            root: root
            on_enter:
                self.children[0].dispatch("on_enter")
            on_tab_release:
                a = root.outliner.copy()
                a.remove(self)
                root.outline(a, self)
            Used:
                root:root

        MDBottomNavigationItem:
            id: profile
            name: "new"
            text: "Profile"
            icon: "account-outline"
            root: root
            on_enter:
                self.children[0].dispatch("on_enter")
            on_tab_release:
                a = root.outliner.copy()
                a.remove(self)
                root.outline(a, self)
            Profile:
                root: root

    MDFloatingActionButton:
        icon: "brightness-4"
        pos_hint: {"center_x":.9, "center_y":.15}
        on_release:
            root.change_theme()
